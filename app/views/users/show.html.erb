<div class="container mt-4 user-profile">
  <div class="row">
    <div class="col-md-8">
      <h1><%= @user.name %>'s Profile</h1>

      <p><strong>Email:</strong> <%= @user.email %></p>
      <% if @user.phone.present? %>
        <p><strong>Phone:</strong> <%= @user.phone %></p>
      <% end %>

      <% if current_user == @user %>
        <p>
          <%= link_to 'Edit profile', edit_user_path(@user), class: 'btn btn-primary' %>
          <%= button_to 'Logout', logout_path, method: :delete, class: 'btn btn-link' %>
        </p>
      <% end %>

      <% if current_user&.admin? %>
        <p>
          <%= link_to 'Edit user (admin)', edit_user_path(@user), class: 'btn btn-warning' %>
          <% unless current_user == @user %>
            <%= button_to 'Delete user', user_path(@user), method: :delete, data: { confirm: 'Are you sure you want to delete this user?' }, class: 'btn btn-danger' %>
          <% end %>
        </p>
      <% end %>

      <h2 class="mt-4">Reservations</h2>
      <% if @user.reservations.any? %>
        <div class="reservation-cards">
          <% @user.reservations.order(created_at: :desc).each do |r| %>
            <% status_class = case r.status
              when 'pending' then 'status-pending'
              when 'cancelled' then 'status-cancelled'
              when 'confirmed' then 'status-confirmed'
              when 'completed' then 'status-completed'
              else 'status-default'
            end %>

            <%= render partial: 'reservations/card', locals: { reservation: r, user: @user } %>
          <% end %>
        </div>
      <% else %>
        <p>No reservations yet.</p>
      <% end %>
    </div>
  </div>
</div>
