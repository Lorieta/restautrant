<div class="container mt-4 user-profile">
  <div class="row">
    <div class="col-md-8">
      <h1><%= @user.name %>'s Profile</h1>

      <p><strong>Email:</strong> <%= @user.email %></p>
      <% if @user.phone.present? %>
        <p><strong>Phone:</strong> <%= @user.phone %></p>
      <% end %>

      <% if current_user == @user %>
        <p>
          <%= link_to 'Edit profile', edit_user_path(@user), class: 'btn btn-primary' %>
          <%= button_to 'Logout', logout_path, method: :delete, class: 'btn btn-link' %>
        </p>
      <% end %>

      <% if current_user&.admin? %>
        <p>
          <%= link_to 'Edit user (admin)', edit_user_path(@user), class: 'btn btn-warning' %>
          <% unless current_user == @user %>
            <%= button_to 'Delete user', user_path(@user), method: :delete, data: { confirm: 'Are you sure you want to delete this user?' }, class: 'btn btn-danger' %>
          <% end %>
        </p>
      <% end %>

      <h2 class="mt-4">Reservations</h2>
      <% if @user.reservations.any? %>
        <ul class="list-group">
          <% @user.reservations.order(created_at: :desc).each do |r| %>
            <li class="list-group-item">
              <strong><%= r.name.presence || "Reservation" %></strong>
              <div><%= l(r.time) if r.respond_to?(:time) && r.time.present? %></div>
              <%= link_to 'View', reservation_path(r), class: 'btn btn-sm btn-outline-secondary ms-2' if defined?(reservation_path) %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>No reservations yet.</p>
      <% end %>
    </div>
  </div>
</div>
