<%# Reusable login form used on /login and the home page %>
<%= render 'shared/error_messages', object: @login_resource if @login_resource.present? %>

<%= form_with url: login_path, local: true, html: { class: 'card' } do |f| %>
  <div class="card-body" style="max-width:420px; padding:1rem 0;">
    <div class="mb-2">
      <label for="session_email" class="form-label">Email</label>
      <%= f.email_field :email,
          name: "session[email]",
          id: 'session_email',
          value: (@login_resource&.email || ''),
          class: "form-control #{'is-invalid' if @login_resource&.errors&.[](:email)&.any?}",
          required: true,
          autofocus: true,
          autocomplete: 'email' %>
      <% if @login_resource&.errors&.[](:email)&.any? %>
        <div class="invalid-feedback"><%= @login_resource.errors[:email].join(', ') %></div>
      <% end %>
    </div>

    <div class="mb-3">
      <label for="session_password" class="form-label">Password</label>
      <%= f.password_field :password,
          name: "session[password]",
          id: 'session_password',
          class: "form-control #{'is-invalid' if @login_resource&.errors&.[](:password)&.any?}",
          required: true,
          minlength: 6,
          autocomplete: 'current-password' %>
      <% if @login_resource&.errors&.[](:password)&.any? %>
        <div class="invalid-feedback"><%= @login_resource.errors[:password].join(', ') %></div>
      <% end %>
    </div>

    <div class="d-flex justify-content-between align-items-center">
      <div class="form-check">
        <%= f.check_box :remember_me, { name: 'session[remember_me]', id: 'session_remember_me', class: 'form-check-input' }, '1', '0' %>
        <%= f.label :remember_me, 'Remember me', class: 'form-check-label', for: 'session_remember_me' %>
      </div>

      <div class="d-flex gap-2 align-items-center">
        <%= f.submit "Log in", class: 'btn btn-primary' %>
      </div>
    </div>
  </div>
<% end %>
