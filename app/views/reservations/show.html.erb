<h1>Reservation details</h1>

<div class="reservation-details">
  <p>
    <strong>Guest:</strong>
    <% if (u = @reservation.user) %>
      <br>
      <strong>Name:</strong>
      <%= u.name.presence || 'N/A' %>
      <br>
      <strong>Email:</strong>
      <%= u.email.presence || 'N/A' %>
      <br>
      <strong>Phone:</strong>
      <%= u.phone.presence || 'N/A' %>
      <br>
    <% else %>
      N/A
    <% end %>
  </p>

  <p>
    <strong>Number of Tables Reserved:</strong>
    <%= @reservation.table&.quantity || 'Unassigned' %>
    <% if @reservation.table&.capacity %>
      (Capacity: <%= @reservation.table.capacity %>)
    <% end %>
  </p>

  <p>
    <strong>Status:</strong>
    <% status_class = case @reservation.status
      when 'pending' then 'bg-warning text-dark'
      when 'cancelled' then 'bg-danger'
      when 'confirmed', 'completed' then 'bg-success'
      else 'bg-secondary'
    end %>
    <span class="badge <%= status_class %>"><%= @reservation.status.to_s.humanize %></span>
  </p>

  <p>
    <strong>Timeslot:</strong>
    <% ts = @reservation.timeslot %>
    <% if ts && ts.date.present? %>
      <%= ts.date.strftime('%B %-d, %Y') %>
      from <%= ts.start_time&.strftime('%-I:%M %p') || 'N/A' %>
      to <%= ts.end_time&.strftime('%-I:%M %p') || 'N/A' %>
    <% else %>
      N/A
    <% end %>
  </p>

  <p>
    <strong>Number of people:</strong>
    <%= @reservation.num_people %>
  </p>


<div class="mt-3">
  <%= link_to 'Back', (@reservation.user ? user_path(@reservation.user) : reservations_path), class: 'btn btn-primary' %>
</div>
