<h2>Tables</h2>

<!-- Container for inline table-related errors (populated by Turbo responses) -->
<div id="table_errors">
    <%# Render model errors inline if a @table object with errors is present
            (this covers the case where the controller supplies @table on redirect
             or when rendering the index after a failed operation). Otherwise show
            any flash alert as a fallback. Turbo responses will replace this node
            with the shared error partial when needed. %>
    <% if defined?(@table) && @table && @table.respond_to?(:errors) && @table.errors.any? %>
        <%= render 'shared/error_messages', object: @table %>
    <% elsif flash[:alert].present? %>
        <div class="alert alert-danger" role="alert"><%= flash[:alert] %></div>
    <% end %>
</div>

<table border="1">
    <tr>
    <th>Quantity</th>
    <th>Capacity</th>
        <th>Actions</th>
    </tr>
    <% @tables.each do |t| %>
        <tr id="<%= dom_id(t) %>">
            <td>
                <%= t.quantity %>
            </td>
            <td>
                <%= t.capacity %>
            </td>
            <td>
                <%= link_to "Edit" , edit_table_path(t) %> |
                <%= link_to "Delete", table_path(t),
                            class: 'btn btn-link p-0 text-danger',
                            data: {
                              action: 'confirm-modal#ask',
                              turbo_method: :delete,
                              confirm_modal_title: 'Delete Table',
                              confirm_modal_message: "Delete table with quantity #{t.quantity} and capacity #{t.capacity}?",
                              confirm_modal_confirm_text: 'Delete',
                              confirm_modal_confirm_class: 'btn btn-danger'
                            } %>
            </td>
        </tr>
        <% end %>
</table>

<%= link_to "Add New Table" , new_table_path %>

